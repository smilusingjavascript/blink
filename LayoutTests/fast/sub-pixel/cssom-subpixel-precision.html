<!DOCTYPE html>
<html>
<head>
    <title>client rect precision test</title>
    <style> 
        #test {
            width: 4.5px;
            height: 4.5px;
            background: navy;
        }
    </style>
</head>
<body>
    <div id="test"></div>
    <div id="console">
        Box above should be 5x5px.<br>
    </div>
</body>
<script>
    var testElement = document.getElementById('test');
    var consoleElement = document.getElementById('console');

    function test()
    {
        var rect = testElement.getBoundingClientRect();
        var width = rect.right - rect.left;

        if (width == 4.5 && testElement.clientWidth == 4.5 && testElement.offsetWidth == 4.5)
            log('PASS: getBoundingClientRect, clientWidth, and offsetWidth reports width with subpixel precision (4.5).');
        else
            log('FAIL: getBoundingClientRect reports width of ' + width +
                ', expected 4.5. clientWidth reports width of ' + testElement.clientWidth +
                ', expected 4.5. offsetWidth reports width of ' + testElement.offsetWidth +
                ', expected 4.5.');
        
        var height = rect.bottom - rect.top;    
        if (height == 4.5 && testElement.clientHeight == 4.5 && testElement.offsetHeight == 4.5)
            log('PASS: getBoundingClientRect, clientHeight, and offsetHeight reports height with subpixel precision (4.5).');
        else
            log('FAIL: getBoundingClientRect reports height of ' + height +
                ', expected 4.5. clientHeight reports height of ' + testElement.clientHeight +
                ', expected 4.5. offsetHeight reports height of ' + testElement.offsetHeight +
                ', expected 4.5.');
    }

    function log(str)
    {
        consoleElement.appendChild(document.createTextNode(str));
        consoleElement.appendChild(document.createElement('br'));
    }

    test();
</script>
</html>
